(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))c(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&c(h)}).observe(document,{childList:!0,subtree:!0});function s(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function c(a){if(a.ep)return;a.ep=!0;const u=s(a);fetch(a.href,u)}})();var L={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.countMap=e.AnimationLoop=e.Random=e.phi=e.radiansPerDegree=e.degreesPerRadian=e.FULL_CIRCLE=e.FIGURE_SPACE=e.NON_BREAKING_SPACE=e.MIN_DATE=e.MAX_DATE=e.csvStringToArray=void 0,e.assertClass=i,e.sleep=s,e.testXml=c,e.parseXml=a,e.followPath=u,e.getAttribute=h,e.parseFloatX=m,e.parseIntX=E,e.parseTimeT=T,e.pickAny=w,e.pick=A,e.filterMap=N,e.makePromise=H,e.dateIsValid=se,e.angleBetween=ae,e.positiveModulo=_,e.rotateArray=ce,e.rectUnion=G,e.rectAddPoint=fe,e.dateToFileName=de,e.lerp=he,e.assertFinite=me,e.shuffleArray=we,e.zip=ge,e.count=pe,e.initializedArray=K,e.sum=Ee,e.makeLinear=Te,e.makeBoundedLinear=Le,e.polarToRectangular=ve,e.permutations=Q;function i(t,n,r="Assertion Failed."){const o=f=>{throw new Error(`${r}  Expected type:  ${n.name}.  Found type:  ${f}.`)};if(t===null)o("null");else if(typeof t!="object")o(typeof t);else if(!(t instanceof n))o(t.constructor.name);else return t;throw new Error("wtf")}function s(t){return new Promise(n=>setTimeout(n,t))}function c(t){const r=new DOMParser().parseFromString(t,"application/xml");for(const o of Array.from(r.querySelectorAll("parsererror")))if(o instanceof HTMLElement)return{error:o};return{parsed:r}}function a(t){if(t!==void 0)return c(t)?.parsed?.documentElement}function u(t,...n){for(const r of n){if(t===void 0)return;if(typeof r=="number")t=t.children[r];else{const o=t.getElementsByTagName(r);if(o.length!=1)return;t=o[0]}}return t}function h(t,n,...r){if(n=u(n,...r),n!==void 0&&n.hasAttribute(t))return n.getAttribute(t)??void 0}function m(t){if(t==null)return;const n=+t;if(isFinite(n))return n}function E(t){const n=m(t);if(n!==void 0)return n>Number.MAX_SAFE_INTEGER||n<Number.MIN_SAFE_INTEGER||n!=Math.floor(n)?void 0:n}function T(t){if(typeof t=="string"&&(t=E(t)),t!=null&&!(t<=0))return new Date(t*1e3)}const p=t=>{const n=/(,|\r?\n|\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^,\r\n]*))/gi,r=[[]];let o;for(;o=n.exec(t);)o[1].length&&o[1]!==","&&r.push([]),r[r.length-1].push(o[2]!==void 0?o[2].replace(/""/g,'"'):o[3]);return r};e.csvStringToArray=p;function w(t){const n=t.values().next();if(!n.done)return n.value}function A(t){return t[Math.random()*t.length|0]}function N(t,n){const r=[];return t.forEach((o,f)=>{const d=n(o,f);d!==void 0&&r.push(d)}),r}function H(){let t,n;return{promise:new Promise((o,f)=>{t=o,n=f}),resolve:t,reject:n}}e.MAX_DATE=new Date(864e13),e.MIN_DATE=new Date(-864e13);function se(t){return isFinite(t.getTime())}e.NON_BREAKING_SPACE=" ",e.FIGURE_SPACE=" ",e.FULL_CIRCLE=2*Math.PI,e.degreesPerRadian=360/e.FULL_CIRCLE,e.radiansPerDegree=e.FULL_CIRCLE/360,e.phi=(1+Math.sqrt(5))/2;function ae(t,n){const r=_(t,e.FULL_CIRCLE);let f=_(n,e.FULL_CIRCLE)-r;const d=e.FULL_CIRCLE/2;if(f>d?f-=e.FULL_CIRCLE:f<-d&&(f+=e.FULL_CIRCLE),Math.abs(f)>d)throw new Error("wtf");return f}function _(t,n){const r=t%n;return r<0?r+Math.abs(n):r}function ce(t,n){if((n|0)!=n)throw new Error(`invalid input: ${n}`);return n=_(n,t.length),n==0?t:[...t.slice(n),...t.slice(0,n)]}class le{static sfc32(n,r,o,f){return function(){n|=0,r|=0,o|=0,f|=0;let d=(n+r|0)+f|0;return f=f+1|0,n=r^r>>>9,r=o+(o<<3)|0,o=o<<21|o>>>11,o=o+d|0,(d>>>0)/4294967296}}static#e=42;static create(n=this.newSeed()){console.info(n);const r=JSON.parse(n);if(!(r instanceof Array))throw new Error("invalid seed");if(r.length!=4)throw new Error("invalid seed");const[o,f,d,B]=r;if(!(typeof o=="number"&&typeof f=="number"&&typeof d=="number"&&typeof B=="number"))throw new Error("invalid seed");return this.sfc32(o,f,d,B)}static newSeed(){const n=[];return n.push(Date.now()),n.push(this.#e++),n.push(Math.random()*2**31|0),n.push(Math.random()*2**31|0),JSON.stringify(n)}}e.Random=le;class ue{onWake;constructor(n){this.onWake=n,this.callback=this.callback.bind(this),this.callback(performance.now())}#e=!1;cancel(){this.#e=!0}callback(n){this.#e||(requestAnimationFrame(this.callback),this.onWake(n))}}e.AnimationLoop=ue;function G(t,n){const r=Math.min(t.x,n.x),o=Math.min(t.y,n.y),f=Math.max(t.x+t.width,n.x+n.width),d=Math.max(t.y+t.height,n.y+n.height),B=f-r,ye=d-o;return{x:r,y:o,width:B,height:ye}}function fe(t,n,r){return G(t,{x:n,y:r,width:0,height:0})}function de(t){return isNaN(t.getTime())?"0000⸱00⸱00 00⦂00⦂00":`${t.getFullYear().toString().padStart(4,"0")}⸱${(t.getMonth()+1).toString().padStart(2,"0")}⸱${t.getDate().toString().padStart(2,"0")} ${t.getHours().toString().padStart(2,"0")}⦂${t.getMinutes().toString().padStart(2,"0")}⦂${t.getSeconds().toString().padStart(2,"0")}`}function he(t,n,r){return t+(n-t)*r}function me(...t){t.forEach(n=>{if(!isFinite(n))throw new Error("wtf")})}function we(t){for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t}function*ge(...t){const n=t.map(r=>r[Symbol.iterator]());for(;;){const r=n.map(o=>o.next());if(r.some(({done:o})=>o))break;yield r.map(({value:o})=>o)}}function*pe(t=0,n=1/0,r=1){for(let o=t;o<n;o+=r)yield o}function K(t,n){const r=[];for(let o=0;o<t;o++)r.push(n(o));return r}e.countMap=K;function Ee(t){return t.reduce((n,r)=>n+r,0)}function Te(t,n,r,o){const f=(o-n)/(r-t);return function(d){return(d-t)*f+n}}function Le(t,n,r,o){r<t&&([t,n,r,o]=[r,o,t,n]);const f=(o-n)/(r-t);return function(d){return d<=t?n:d>=r?o:(d-t)*f+n}}function ve(t,n){return{x:Math.cos(n)*t,y:Math.sin(n)*t}}function*Q(t,n=[]){if(t.length==0)yield n;else for(let r=0;r<t.length;r++){const o=t[r],f=[...n,o],d=[...t.slice(0,r),...t.slice(r+1)];yield*Q(d,f)}}})(L);var y={};Object.defineProperty(y,"__esModule",{value:!0});var O=y.getById=Se;y.loadDateTimeLocal=Ae;var Me=y.getBlobFromCanvas=Ie;y.getAudioBalanceControl=Fe;y.getHashInfo=ke;y.createElementFromHTML=Ce;y.download=be;const Y=L;function Se(e,i){const s=document.getElementById(e);if(!s)throw new Error("Could not find element with id "+e+".  Expected type:  "+i.name);if(s instanceof i)return s;throw new Error("Element with id "+e+" has type "+s.constructor.name+".  Expected type:  "+i.name)}function Ae(e,i,s="milliseconds"){let c;switch(s){case"minutes":{c=i.getSeconds()*1e3+i.getMilliseconds();break}case"seconds":{c=i.getMilliseconds();break}case"milliseconds":{c=0;break}default:throw new Error("wtf")}e.valueAsNumber=+i-i.getTimezoneOffset()*6e4-c}function Ie(e){const{reject:i,resolve:s,promise:c}=(0,Y.makePromise)();return e.toBlob(a=>{a?s(a):i(new Error("blob is null!"))}),c}function Fe(e){const i=new AudioContext,s=i.createMediaElementSource(e),c=new StereoPannerNode(i,{pan:0});return s.connect(c).connect(i.destination),a=>{c.pan.value=a}}function ke(){const e=new Map;return/^#?(.*)$/.exec(location.hash.replace("+","%20"))[1].split("&").forEach(c=>{const a=c.split("=",2);if(a.length==2){const u=decodeURIComponent(a[0]),h=decodeURIComponent(a[1]);e.set(u,h)}}),e}function Ce(e,i){var s=document.createElement("div");return s.innerHTML=e.trim(),(0,Y.assertClass)(s.firstChild,i,"createElementFromHTML:")}function be(e,i){var s=document.createElement("a");if(s.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(i)),s.setAttribute("download",e),document.createEvent){var c=document.createEvent("MouseEvents");c.initEvent("click",!0,!0),s.dispatchEvent(c)}else s.click()}const b=1080,R=1920,g=75/1920*R,D="white",W="#666",U=O("main",HTMLCanvasElement),J=O("start",HTMLButtonElement),z=O("voiceover",HTMLAudioElement);U.width=b;U.height=R;const l=U.getContext("2d"),I=(e=g)=>{l.font=`${e}px "Croissant One"`};I();l.textAlign="center";l.textBaseline="middle";l.textRendering="optimizeLegibility";l.fillStyle=D;l.fillRect(0,0,b,R);const S=[["Z","A","Q","B","R","T","S","D"],["A","B","R","D"],["A","D"],["A"]],V=S.map(e=>e.map(()=>0)),M=S.length,Z=1,q=Z/(Z+S[0].length)*R,Re=R-q,k=S.map((e,i)=>{const s=b/M*(i+.5);return e.map((c,a)=>{const u=q+Re/e.length*(a+.5);return{x:s,y:u}})});function $(e,i,s){const c=b/S[0].length*(i+.5),a=q/2;l.fillStyle=D,l.fillRect(c-g*.6,a-g*.6,g*1.2,g*1.1),l.fillStyle=s,l.fillText(e,c,a);const u=(i+1).toString(),h=["st","nd","rd"][i]??"th",m=g*.667,E=g*.42;I(m);const T=l.measureText(u);I(E);const p=l.measureText(h),w=T.width+p.width,N=c-w/2+T.width/2,H=N+w/2;I(m),l.fillText(u,N,a+g),I(E),l.fillText(h,H,a+g*.9),I()}function x(e,i,s=0){const{x:c,y:a}=k[e][i];if(s>1&&e==M-1){const h=s-1;return{x:c+1*g,y:a+h*g*1.25}}else return{x:c+s*g,y:a}}function Pe(){l.strokeStyle="#ccc",k.forEach((i,s)=>{const c=k[s+1];c&&i.forEach((a,u)=>{const h=u/2|0,m=c[h];l.moveTo(a.x,a.y),l.lineTo(m.x,m.y),l.lineWidth=10,l.stroke()})}),l.fillStyle=D;const e=b/M/5;k.flat().forEach(({x:i,y:s})=>{l.beginPath(),l.ellipse(i,s,e,e,0,0,2*Math.PI),l.fill()})}function Ne(e,i){const{x:s,y:c}=e,a=g*.4;l.beginPath(),l.moveTo(s-a,c-a),l.lineTo(s+a,c+a),l.lineWidth=12,l.strokeStyle=D,l.stroke(),l.lineWidth=6.1,l.strokeStyle=i,l.stroke()}function ee(e,i,s){l.fillStyle=s,l.fillText(i,e.x,e.y)}const v={saveFrames:!1,slowness:0},P=1e3/60;let C=0;function te(e){if(e<0)throw new Error("wtf");if(C+=e|0,v.slowness){const i=C*P,s=z.currentTime*1e3;return L.sleep((i-s)*v.slowness)}else return Promise.resolve()}function F(e){return te(_e(e))}function _e(e){const s=(e/P|0)-C;if(s<0)throw new Error("wtf");return s}let ne=L.dateToFileName(new Date);const X=document.createElement("a");async function re(){if(v.saveFrames){X.download=`${ne} ${(C++).toString().padStart(4,"0")}.png`;const e=await Me(U),i=URL.createObjectURL(e);X.href=i,X.click(),URL.revokeObjectURL(i)}v.slowness&&await L.sleep(P*v.slowness)}function j(e,i,s,c){const a=c=="start"||c=="both",u=c=="end"||c=="both",h=(()=>{let w=s-1;return a&&w++,u&&w++,w})(),m=(i-e)/h,E=e+(a?m:0);let T=0;async function p(){if(T>=s)throw new Error("wtf");const w=E+m*T;await F(w),await re(),T++}return p}async function ie(e,i,s,c,a,u){let h=j(c,a,e.length,"end"),m=M;const E=[];for(const{rowIndex:p,newText:w}of e){m--;const A=V[m][p]++;Ne(x(m,p,A),i),w&&E.unshift({rowIndex:p,columnIndex:m,newText:w}),await h()}h=j(a,u,E.length,"end");for(const{rowIndex:p,columnIndex:w,newText:A}of E)ee(x(w,p,V[w][p]),A,i),await h();const{newText:T}=e[0];T&&($(T,s,i),await te(500/P))}function oe(e){for(const[i,s]of L.zip(k[e],S[e]))ee(i,s,W)}{const e=L.makePromise();J.addEventListener("click",()=>{ne=L.dateToFileName(new Date),document.querySelectorAll("input").forEach(i=>{(i.type!="radio"||!i.checked)&&(i.disabled=!0)}),J.disabled=!0,e.resolve()},{once:!0}),await e.promise}v.saveFrames=O("saveFrames",HTMLInputElement).checked;{const e=L.assertClass(document.querySelector('[name="speed"]:checked'),HTMLElement).dataset.slowness;if(e===void 0)throw new Error("wtf");v.slowness=+e}v.slowness&&(z.playbackRate=1/v.slowness,z.play());oe(0),await re(),await F(2200),$("??",0,W),await F(3750);{await F(3750);const s=j(3750,6500,M+1,"both");Pe();for(const c of L.count(0,M))oe(c),await s();$(S[M-1][0],0,W),await s(),await F(6500)}await F(8e3),$("??",1,"red");await ie([{rowIndex:0,newText:"B"},{rowIndex:0,newText:"B"},{rowIndex:0,newText:"Z"},{rowIndex:1}],"red",1,12e3,13750,16500);await ie([{rowIndex:0,newText:"D"},{rowIndex:0,newText:"Q"},{rowIndex:1,newText:"Q"},{rowIndex:3}],"blue",2,16500,18250,21e3);console.log(`Total run time:  ${(C*P).toLocaleString()} ms.`);
